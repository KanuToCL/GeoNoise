Category,Test,Expected,Actual,Tolerance,Passed,Reference,Timestamp,Inputs,Equation
Wall Reflection Z,Source higher than receiver,z = 3.25 m,z = 3.25 m,±0.01 m,PASS,Issue #9 - Image Source Method,2026-02-07T21:56:05.681Z,"S.z=5, R.z=1.5, t=0.5","z = R.z + t·(S.z - R.z) = 1.5 + 0.5·3.5 = 3.25"
Wall Reflection Z,Receiver higher than source,z = 2.5 m,z = 2.50 m,±0.01 m,PASS,Issue #9 - Image Source Method,2026-02-07T21:56:05.684Z,"S.z=1, R.z=4, t=0.5","z = R.z + t·(S.z - R.z) = 4 + 0.5·(-3) = 2.5"
Wall Reflection Z,Equal source/receiver heights,z = 2.0 m,z = 2.00 m,exact,PASS,Issue #9 - Image Source Method,2026-02-07T21:56:05.684Z,"S.z=2, R.z=2, t=0.5","z = R.z + t·(S.z - R.z) = 2 + 0 = 2"
Path Rejection,Reflection Z > wall height (ray misses),z = 8m > 3m → rejected,z = 8.0m, rejected = true,exact,PASS,Issue #9 - Geometric validation,2026-02-07T21:56:05.686Z,"S.z=15, R.z=1, wall h=3m, t=0.5","Reject if z = R.z + t·(S.z - R.z) > wall_height"
Path Rejection,Reflection Z < wall height (valid),z = 2m ≤ 10m → accepted,z = 2.0m, accepted = true,exact,PASS,Issue #9 - Geometric validation,2026-02-07T21:56:05.686Z,"S.z=3, R.z=1, wall h=10m, t=0.5","Accept if 0 ≤ z ≤ wall_height"
Path Rejection,Reflection Z just above wall height,z = 5.5m > 5m → rejected,z = 5.5m,exact,PASS,Issue #9 - Boundary condition,2026-02-07T21:56:05.686Z,"S.z=10, R.z=1, wall h=5m, t=0.5","z = 5.5 > 5 → reject"
Path Rejection,Underground reflection check (z ≥ 0),z ≥ 0 for valid t ∈ [0,1],z = 9.05m ≥ 0,≥ 0,PASS,Issue #9 - Geometric validation,2026-02-07T21:56:05.687Z,"S.z=0.5, R.z=10, t=0.1","For 0 ≤ t ≤ 1: z interpolates between S.z and R.z"
Image Source Method,Mirror source across vertical wall,S' = (15, 0, 3),S' = (15.0, 0.0, 3.0),±0.01 m,PASS,Image Source Method,2026-02-07T21:56:05.687Z,"S=(5,0,3), wall at x=10","S'.x = 2·wall_x - S.x = 2·10 - 5 = 15"
Image Source Method,Z coordinate preserved in mirror,S'.z = S.z = 7.5 m,S'.z = 7.5 m,exact,PASS,Image Source Method,2026-02-07T21:56:05.690Z,"S=(3,2,7.5), vertical wall","Vertical wall mirroring only affects XY, not Z"
Path Distance,Total path distance calculation,d_total > d_direct,d_total = 20.40m > d_direct = 20.00m,> 0,PASS,Geometry,2026-02-07T21:56:05.691Z,"S=(0,0,2), R_p=(10,2,2), R=(20,0,2)","d_total = |S→R_p| + |R_p→R|"
Path Distance,Path difference δ = d_refl - d_direct,δ ≥ 0,δ = 2.450 m,≥ 0,PASS,Geometry,2026-02-07T21:56:05.691Z,"S=(0,0,2), R=(20,0,2), R_p offset","δ = |S→R_p→R| - |S→R| ≥ 0 (triangle inequality)"
Old vs New,High source - method comparison,New (geometric): z = 3.5 m,Old (clamped): z = 6.0 m,different,PASS,Issue #9 Fix Validation,2026-02-07T21:56:05.691Z,"S.z=6, R.z=1, wall_h=10","Old: min(h, max(S.z, R.z)) vs New: R.z + t·(S.z - R.z)"
Old vs New,Symmetric case - methods agree,Both: z = 3.0 m,Old = 3.0, New = 3.0,equal,PASS,Issue #9 Fix Validation,2026-02-07T21:56:05.691Z,"S.z=3, R.z=3 (symmetric)","When S.z = R.z, both methods give z = S.z = R.z"